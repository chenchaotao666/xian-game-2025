# 三国策略对战游戏完整规则

## 1. 基础设定

### 1.1 地图布局
- **地图大小**：80×60静态地图
- **地图元素**：己方与敌方各6个英雄角色、城寨、龙旗据点、障碍物
- **视野机制**：全局视野，无战争迷雾

### 1.2 距离与移动
- **距离计算**：切比雪夫距离，公式为 max(Δx, Δy)
- **移动方向**：八方向移动（上下左右及四个对角线）
- **移动速度**：所有单位每回合移动1格

### 1.3 单位占位
- 武将和所属小兵视为一个整体作战单位
- 实际只占用地图1×1区域

## 2. 地图元素类型

| 单位名称 | 编号 | 英文名 | 描述 | 控制归属 |
|---------|------|--------|------|----------|
| 空地 | 0 | Space | 可行军的空地 | NA |
| 山丘 | 1 | Mount | 山（障碍物） | NA |
| 水域 | 2 | Water | 水（障碍物） | NA |
| 龙旗据点 | 3 | Flag | 玩家可占领的据点 | NA |
| 中立城寨（一级） | 50 | SmallCity | 攻打可获得资源 | NA |
| 中立城寨（二级） | 51 | MiddleCity | 攻打可获得资源 | NA |
| 中立城寨（三级） | 52 | BigCity | 攻打可获得资源 | NA |
| 主基地 | 5 | Base | 玩家出生基地 | 玩家 |

## 3. 武将系统

### 3.1 武将分类与属性

#### 猛将类
- **代表武将**：吕布、赵云、关羽
- **特点**：高攻击、低生存
- **属性**：
  - 武力：100
  - 统帅：6
  - 体力：1500

#### 统帅类
- **代表武将**：曹操、刘备、孙权
- **特点**：统帅值高，生存能力强
- **属性**：
  - 武力：60
  - 统帅：12（最高）
  - 体力：1600（最高）

#### 谋士类
- **代表武将**：诸葛亮、周瑜、司马懿
- **特点**：辅助类型，对猛将有克制关系
- **属性**：
  - 武力：50
  - 统帅：8
  - 体力：1200

### 3.2 武将技能详情

| 武将 | 类型 | 攻击距离 | 技能1（冷却50回合） | 技能2（冷却30回合） |
|------|------|----------|-------------------|-------------------|
| **吕布** | 猛将 | 3 | 无双乱舞：对攻击距离内所有敌方单位造成2×武力值伤害 | 大杀四方：体力低于1000时可释放，3回合内对敌方武将伤害提升50%，结束后2回合虚弱状态 |
| **赵云** | 猛将 | 3 | 龙胆突刺：敌方武将体力低于25%直接击杀，否则造成2×武力值伤害 | 冲锋陷阵：对范围内所有小兵造成0.5×武力值伤害，无小兵则对敌方武将造成1×武力值伤害 |
| **关羽** | 猛将 | 3 | 一骑当千：对单个敌方武将造成3×武力值伤害 | 青龙偃月斩：对范围内所有敌方单位造成2×武力值伤害，释放后2回合蓄力状态 |
| **刘备** | 统帅 | 3 | 仁德之君：为己方单位施加护盾，减少50%伤害，持续5回合 | 蜀汉旗：标记距离8单位内位置，下回合可传送至此 |
| **曹操** | 统帅 | 3 | 虎豹骑召令：召唤2头巨兽造成1.5×武力值伤害并击退5格 | 乱世枭雄：武力值+20持续3回合，攻击回复伤害×10%的体力 |
| **孙权** | 统帅 | 3 | 江东水师：为己方所有作战单位恢复20%体力值 | 制衡：3回合内每回合额外增加1名士兵，无消耗 |
| **诸葛亮** | 谋士 | 3 | 锦囊妙计：获得免疫效果，3回合内敌方伤害为0 | 斗转星移：重新设定我方将领阵型，恢复15%体力 |
| **周瑜** | 谋士 | 3 | 火攻：4×4范围内对所有单位造成2.5×武力伤害，盾兵伤害翻倍 | 连营：额外伤害+20%，受到伤害-50%，持续3回合 |
| **司马懿** | 谋士 | 3 | 鬼谋：沉默敌方武将5回合，每回合造成1.5×武力值伤害 | 天命：禁锢单个敌方武将5回合，每回合造成1×武力伤害 |

### 3.3 瞬移技能
- **所有武将共有技能**
- **传送范围**：10格
- **冷却时间**：60回合

## 4. 兵种系统

### 4.1 兵种类型

| 兵种 | 编号 | 武力 | 体力 | 攻击距离 | 特点 |
|------|------|------|------|----------|------|
| 弓兵 | 7 | 25 | 240 | 3 | 高输出，体力一般 |
| 盾兵 | 8 | 15 | 400 | 3 | 高体力，武力一般 |

### 4.2 配兵规则
- 武将统帅值决定带兵上限
- 每名玩家可自由搭配2种兵力
- 生产士兵消耗20粮草和1回合

## 5. 经济系统

### 5.1 粮草机制
- **初始粮草**：100
- **获取方式**：
  - 攻打城寨获得奖励
  - 击杀敌方武将获得120粮草
- **消耗用途**：
  - 生产士兵：每名20粮草
  - 切换阵型：100粮草
  - 占领据点维持
- **粮草上限**：1500，超出不再获得奖励

### 5.2 城寨攻打

| 城寨等级 | 伤害值 | 城防值 | 粮草奖励 | 攻击距离 |
|----------|--------|--------|----------|----------|
| 1级 | 60 | 1000 | 100 | 3 |
| 2级 | 120 | 2000 | 200 | 4 |
| 3级 | 180 | 3000 | 400 | 5 |

- 城寨被攻陷后100回合重新生成

## 6. 阵型系统

### 6.1 士气积累
- **击杀小兵**：+10士气
- **击杀将领**：+80士气
- **士气上限**：300

### 6.2 阵型效果

| 阵型 | 效果 | 士气消耗 | 粮草消耗 | 加成上限 |
|------|------|----------|----------|----------|
| 鹤翼阵 | 攻击力加成10%-15% | 50 | 100 | 15% |
| 八卦阵 | 减伤10%-15% | 50 | 100 | 15% |

**加成规则**：
- ≤5人：10%
- 6-10人：11%
- 11-15人：12%
- 依此类推

## 7. BUFF系统

### 7.1 BUFF获取
- 每100回合可选择一个增益效果

### 7.2 BUFF类型

#### 立即生效类
| 名称 | 编号 | 效果 | 限制 |
|------|------|------|------|
| 传国玉玺 | 1001 | 为某将领召唤4名弓兵+2名盾兵 | 不超过统帅值上限 |
| 华佗再世 | 1002 | 回复所有单位50%体力 | 无 |

#### 持续生效类
| 名称 | 编号 | 效果 | 持续时间 |
|------|------|------|----------|
| 青龙护体 | 1003 | 所受伤害减少20% | 5回合 |
| 酒狂 | 1004 | 武力增加30%，体力损失5% | 3回合 |

## 8. 操作指令

| 指令 | 说明 | 使用限制 |
|------|------|----------|
| PICK | 选择武将 | 仅第1回合或武将复活前1回合 |
| MAKE | 生产士兵并分配兵力 | 可与其他指令同时发送 |
| BUFF | 获取增益效果 | 仅特定回合（每100回合） |
| FORM | 切换阵型 | 消耗士气和粮草 |
| MOVE | 移动 | 每回合1格 |
| SP | 瞬移技能 | 冷却60回合 |
| AC | 占领据点 | 需满足占领条件 |
| SG | 攻打城寨 | 与AD指令冲突 |
| AD | 普通攻击 | 与SG指令冲突 |
| SK | 释放技能 | 按技能冷却时间 |

## 9. 战斗机制

### 9.1 伤害结算
- **回合结束后统一结算**
- **承伤顺序**：盾兵 → 弓兵 → 英雄
- **直接对武将伤害**：小兵无法承伤

### 9.2 武将复活
- **死亡后5回合复活**
- **复活位置**：基地
- **复活时可更换武将**（复活前1回合发送PICK指令）

## 10. 据点占领

### 10.1 据点基本信息
- **位置**：地图中央
- **大小**：3×3区域
- **开放时间**：100回合后

### 10.2 占领条件
- 武将数量多的一方占领成功
- 武将数量相等时占领无效
- 需要足够粮草支持
- 至少1名武将驻守

### 10.3 维持成本
- **每名武将**：每回合消耗2粮草
- **每名小兵**：每回合消耗1粮草
- 粮草不足时停止积累占据回合但保持占领状态

## 11. 胜负规则

### 11.1 胜利条件
1. **主要胜利**：占据回合积累60回合
2. **备选胜利**：1000回合后占据回合数更多的一方获胜

### 11.2 对战方式
- 双场对战，玩家互换位置
- 掉线直接判负

### 11.3 指令约束
1. MAKE指令可与其他指令同时发送
2. BUFF指令只能在特定回合发送
3. 同一将领的SG与AD指令不可同时发送
4. PICK指令只能在特定回合发送
5. AC指令需通过服务端有效性检验
6. 同一回合AD与SG指令冲突